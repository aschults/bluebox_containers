{
   "kind":"ReplicationController",
   "apiVersion":"v1",
   "metadata":{
      "name":"clamd",
      "labels":{
         "app":"clamd",
         "pkg":"clamd"
      }
   },
   "spec":{
      "replicas":2,
      "selector":{
         "app":"clamd",
         "pkg":"clamd"
      },
      "template":{
         "metadata":{
            "labels":{
               "app":"clamd",
               "pkg":"clamd"
            }
         },
         "spec":{
            "containers":[
               {
                  "name":"clamd",
                  "image":"geekduck/clamav",
                  "imagePullPolicy":"Always",
                  "ports":[
                     {
                        "name":"clamd",
                        "containerPort":3310,
                        "protocol":"TCP"
                     }
                  ],
                  "livenessProbe": {
                     "exec": {
                        "command": [
                           "/bin/sh",   
                           "-c",
                           "echo PING | nc 127.0.0.1 3310 | grep PONG"
                        ]
                     },
                     "initialDelaySeconds": 30,
                     "timeoutSeconds": 2
                  } 

               }
            ]
         }
      }
   }
}
